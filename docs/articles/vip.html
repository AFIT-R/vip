<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Variable importance plots: an introduction to vip ‚Ä¢ vip</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Variable importance plots: an introduction to vip">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vip</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/vip.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Variable importance plots: an introduction to vip</h1>
                        <h4 class="author">Brandon M. Greenwell and Bradley C. Boehmke</h4>
            
            <h4 class="date">2018-07-01</h4>
      
      
      <div class="hidden name"><code>vip.Rmd</code></div>

    </div>

    
    
<div id="warning-this-vignette-is-under-construction" class="section level2">
<h2 class="hasAnchor">
<a href="#warning-this-vignette-is-under-construction" class="anchor"></a>‚ö†Ô∏è Warning: This vignette is under construction! üöß üöß üöß üöß</h2>
<p>In the era of ‚Äúbig data‚Äù, it is becoming more of a challenge to not only build state-of-the-art predictive models, but also gain an understanding of what‚Äôs really going on in the data. For example, it is often of interest to know which, if any, of the predictors in a fitted model are relatively influential on the predicted outcome. Some modern algorithms‚Äîlike random forests and gradient boosted decision trees‚Äîhave a natural way of quantifying the importance or relative influence of each feature. Other algorithms‚Äîlike naive Bayes classifiers and support vector machines‚Äîare not capable of doing so and model-agnostic approaches are generally used to measure each predictor‚Äôs importance. Enter <a href="https://koalaverse.github.io/vip/index.html"><code>vip</code></a>, an R package for constructing variable importance (VI) scores/plots for many types of supervised learning algorithms using model-based and novel model-agnostic approaches.</p>
<!-- 1) **Model-based VI scores (when available)**. For example, in a random forest, VI can be computed using the permutation approach described in [@random-breiman-2001]. Other supervised learning algorithms (like MARS and GBMs) have their own ways of constructing VI scores. -->
<!-- 2) **Model-agnostic VI scores**. `vip` currently implements two approaches to computing model-agnostiv VI scores:  -->
<!--    - **PDP method**. This is a new idea described in @greenwell-simple-2018. The idea is to measure the "flatness" of Friedman's *partial dependence plot* (PDP) [@friedman-2001-greedy] for each feature. A feature whose PDP is flat, relative to the other features, implies that the feature has less of an influence on the estimated prediction surface as it changes while taking into account the average effect of the other features in the model. -->
<!--    - **ICE curve method**. This method is similar to the PDP-based VI scores above, but are based on measuring the "flatness" of the *individual conditional expectation* (ICE) curves presented by @goldstein-peeking-2015. -->
<!-- Since PDPs and ICE curves can be constructed for any supervised learning algorithm, we can use the PDP anbd ICE curve methods to construct VI scores for any supervised learning algorithm (while simultaneously taking into account the fitted model and all of the features). -->
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># The easiest way to get vip is to install from CRAN:</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">"vip"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Or install the the development version from GitHub:</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="cf">if</span> (<span class="op">!</span><span class="kw">requireNamespace</span>(<span class="st">"devtools"</span>)) {</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"koalaverse/vip"</span>)</a></code></pre></div>
</div>
<div id="example-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#example-usage" class="anchor"></a>Example usage</h2>
<p>For illustration, we use one of the regression problems described in Friedman (1991) and <span class="citation">Breiman (1996)</span>. These data are available in the <a href="https://CRAN.R-project.org/package=mlbench">mlbench</a> package. The inputs consist of 10 independent variables uniformly distributed on the interval <span class="math inline">\(\left[0, 1\right]\)</span>; however, only 5 out of these 10 are actually used in the true model. Outputs are created according to the formula described in <code><a href="http://www.rdocumentation.org/packages/mlbench/topics/mlbench.friedman1">?mlbench::mlbench.friedman1</a></code>. The code chunk below simulates 500 observations from the model default standard deviation.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Simulate training data</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">101</span>)  <span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">trn &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(mlbench<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/mlbench/topics/mlbench.friedman1">mlbench.friedman1</a></span>(<span class="dv">500</span>))  <span class="co"># ?mlbench.friedman1</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co"># Inspect data</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">tibble<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/as_tibble">as.tibble</a></span>(trn)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; # A tibble: 500 x 11</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;       x.1   x.2   x.3   x.4    x.5     x.6   x.7   x.8   x.9  x.10     y</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;  1 0.372  0.406 0.102 0.322 0.693  0.758   0.518 0.530 0.878 0.763 14.9 </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  2 0.0438 0.602 0.602 0.999 0.776  0.533   0.509 0.487 0.118 0.176 15.3 </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  3 0.710  0.362 0.254 0.548 0.0180 0.765   0.715 0.844 0.334 0.118 15.1 </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  4 0.658  0.291 0.542 0.327 0.230  0.301   0.177 0.346 0.474 0.283 10.7 </span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  5 0.250  0.794 0.383 0.947 0.462  0.00487 0.270 0.114 0.489 0.311 17.6 </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  6 0.300  0.701 0.992 0.386 0.666  0.198   0.924 0.775 0.736 0.974 18.3 </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  7 0.585  0.365 0.283 0.488 0.845  0.466   0.715 0.202 0.905 0.640 14.6 </span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  8 0.333  0.552 0.858 0.509 0.697  0.388   0.260 0.355 0.517 0.165 17.0 </span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  9 0.622  0.118 0.490 0.390 0.468  0.360   0.572 0.891 0.682 0.717  8.54</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; 10 0.546  0.150 0.476 0.706 0.829  0.373   0.192 0.873 0.456 0.694 15.0 </span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; # ... with 490 more rows</span></a></code></pre></div>
<div id="model-based-vi-scores" class="section level3">
<h3 class="hasAnchor">
<a href="#model-based-vi-scores" class="anchor"></a>Model-based VI scores</h3>
<p>Coming soon.</p>
<div id="trees-and-tree-ensembles" class="section level4">
<h4 class="hasAnchor">
<a href="#trees-and-tree-ensembles" class="anchor"></a>Trees and tree ensembles</h4>
<p>Decision trees probably offer the most natural model-based approach to quantifying the importance of each feature. In a binary decision tree, at each node <span class="math inline">\(t\)</span>, a single predictor is used to partition the data into two homogeneous groups. The chosen predictor is the one that maximizes some measure of improvement <span class="math inline">\(\widehat{i}_t\)</span>. The relative importance of predictor <span class="math inline">\(x\)</span> is the sum of the squared improvements over all internal nodes of the tree for which <span class="math inline">\(x\)</span> was chosen as the partitioning variable; see <span class="citation">Breiman, Friedman, and Charles J. Stone (1984)</span> for details. This idea also extends to ensembles of decision trees, such as RFs and GBMs. In ensembles, the improvement score for each predictor is averaged across all the trees in the ensemble. Fortunately, due to the stabilizing effect of averaging, the improvement-based VI metric is often more reliable in large ensembles <span class="citation">(see Hastie, Tibshirani, and Friedman 2009, pg. 368)</span>. RFs offer an additional method for computing VI scores. The idea is to use the leftover out-of-bag (OOB) data to construct validation-set errors for each tree. Then, each predictor is randomly shuffled in the OOB data and the error is computed again. The idea is that if variable <span class="math inline">\(x\)</span> is important, then the validation error will go up when <span class="math inline">\(x\)</span> is perturbed in the OOB data. The difference in the two errors is recorded for the OOB data then averaged across all trees in the forest.</p>
<p>To illustrate, we fit a CART-like regression tree, RF, and GBM to the simulated training data. (<strong>Note:</strong> there are a number of different packages available for fitting these types of models, we just picked popular and efficient implementations for illustration.)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Load required packages</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">library</span>(xgboost)  <span class="co"># for fitting GBMs</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">library</span>(ranger)   <span class="co"># for fitting random forests</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">library</span>(rpart)    <span class="co"># for fitting CART-like decision trees</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co"># Fit a single regression tree</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">tree &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart</a></span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> trn)</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co"># Fit a random forest</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw">set.seed</span>(<span class="dv">101</span>)</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">rfo &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ranger/topics/ranger">ranger</a></span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> trn, <span class="dt">importance =</span> <span class="st">"impurity"</span>)</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co"># Fit a GBM</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="kw">set.seed</span>(<span class="dv">102</span>)</a>
<a class="sourceLine" id="cb3-15" data-line-number="15">bst &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/xgboost/topics/xgb.train">xgboost</a></span>(</a>
<a class="sourceLine" id="cb3-16" data-line-number="16">  <span class="dt">data =</span> <span class="kw">data.matrix</span>(<span class="kw">subset</span>(trn, <span class="dt">select =</span> <span class="op">-</span>y)),</a>
<a class="sourceLine" id="cb3-17" data-line-number="17">  <span class="dt">label =</span> trn<span class="op">$</span>y, </a>
<a class="sourceLine" id="cb3-18" data-line-number="18">  <span class="dt">objective =</span> <span class="st">"reg:linear"</span>,</a>
<a class="sourceLine" id="cb3-19" data-line-number="19">  <span class="dt">nrounds =</span> <span class="dv">100</span>, </a>
<a class="sourceLine" id="cb3-20" data-line-number="20">  <span class="dt">max_depth =</span> <span class="dv">5</span>, </a>
<a class="sourceLine" id="cb3-21" data-line-number="21">  <span class="dt">eta =</span> <span class="fl">0.3</span>,</a>
<a class="sourceLine" id="cb3-22" data-line-number="22">  <span class="dt">verbose =</span> <span class="dv">0</span>  <span class="co"># suppress printing</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23">)</a></code></pre></div>
<p>Each of the above packages include the ability to compute VI scores for all the features in the model; however, the implementation is rather package specific, as shown in the code chunk below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># VI plot for single regression tree</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">(vi_tree &lt;-<span class="st"> </span>tree<span class="op">$</span>variable.importance)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;       x.4       x.2       x.1       x.5       x.3       x.6       x.7 </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; 4233.8443 2512.6610 2461.1746 1229.9290  687.9090  533.1549  356.8836 </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;       x.9       x.8      x.10 </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;  330.6542  275.6148  274.5077</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw">barplot</span>(vi_tree, <span class="dt">horiz =</span> <span class="ot">TRUE</span>, <span class="dt">las =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="vip_files/figure-html/trees-manual-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># VI plot for RF</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">(vi_rfo &lt;-<span class="st"> </span>rfo<span class="op">$</span>variable.importance)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;       x.1       x.2       x.3       x.4       x.5       x.6       x.7 </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; 2069.0548 2421.4997  951.0145 3784.6753 1496.1794  364.5990  364.6499 </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;       x.8       x.9      x.10 </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;  366.6599  337.7340  386.6057</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="kw">barplot</span>(vi_rfo, <span class="dt">horiz =</span> <span class="ot">TRUE</span>, <span class="dt">las =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="vip_files/figure-html/trees-manual-2.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co"># VI plot for GMB</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">(vi_bst &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/xgboost/topics/xgb.importance">xgb.importance</a></span>(<span class="dt">model =</span> bst))</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;     Feature        Gain      Cover  Frequency</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;  1:     x.4 0.403044695 0.12713681 0.10149673</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;  2:     x.2 0.224976755 0.10504115 0.13610851</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  3:     x.1 0.188540934 0.10597358 0.17633302</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  4:     x.5 0.089410524 0.07012969 0.07904584</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  5:     x.3 0.068165825 0.10009244 0.10243218</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  6:     x.9 0.008023691 0.07802100 0.07062675</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  7:     x.6 0.007456234 0.13405129 0.10243218</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  8:     x.7 0.003997672 0.08678822 0.07764266</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  9:    x.10 0.003766492 0.11868040 0.08325538</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; 10:     x.8 0.002617178 0.07408544 0.07062675</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="kw"><a href="http://www.rdocumentation.org/packages/xgboost/topics/xgb.plot.importance">xgb.ggplot.importance</a></span>(vi_bst)</a></code></pre></div>
<p><img src="vip_files/figure-html/trees-manual-3.png" width="700" style="display: block; margin: auto;"></p>
<p>As we would expect, all three methods rank the variables <code>x.1</code>‚Äì<code>x.5</code> as more important than the others. While this is good news, it is unfortunate that we have to remember the different functions and ways of extracting and plotting VI scores from various model fitting functions. This is where <code>vip</code> can help‚Ä¶one function to rule them all! Once <code>vip</code> is loaded, we can use <code><a href="../reference/vi.html">vi()</a></code> to extract a <a href="http://tibble.tidyverse.org/">tibble</a> of VI scores.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Load required packages</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">library</span>(vip)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; Attaching package: 'vip'</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; The following object is masked from 'package:utils':</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;     vi</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co"># Extract (tibble of) VI scores</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="kw"><a href="../reference/vi.html">vi</a></span>(tree)  <span class="co"># CART-like decision tree</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;    Variable Importance</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  1 x.4           4234.</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt;  2 x.2           2513.</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt;  3 x.1           2461.</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt;  4 x.5           1230.</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt;  5 x.3            688.</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt;  6 x.6            533.</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt;  7 x.7            357.</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt;  8 x.9            331.</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt;  9 x.8            276.</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt; 10 x.10           275.</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="kw"><a href="../reference/vi.html">vi</a></span>(rfo)   <span class="co"># RF</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt;    Variable Importance</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt;  1 x.4           3785.</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt;  2 x.2           2421.</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt;  3 x.1           2069.</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt;  4 x.5           1496.</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt;  5 x.3            951.</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt;  6 x.10           387.</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt;  7 x.8            367.</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">#&gt;  8 x.7            365.</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">#&gt;  9 x.6            365.</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="co">#&gt; 10 x.9            338.</span></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="kw"><a href="../reference/vi.html">vi</a></span>(bst)   <span class="co"># GBM</span></a>
<a class="sourceLine" id="cb7-39" data-line-number="39"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb7-40" data-line-number="40"><span class="co">#&gt;    Variable Importance</span></a>
<a class="sourceLine" id="cb7-41" data-line-number="41"><span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-42" data-line-number="42"><span class="co">#&gt;  1 x.4         0.403  </span></a>
<a class="sourceLine" id="cb7-43" data-line-number="43"><span class="co">#&gt;  2 x.2         0.225  </span></a>
<a class="sourceLine" id="cb7-44" data-line-number="44"><span class="co">#&gt;  3 x.1         0.189  </span></a>
<a class="sourceLine" id="cb7-45" data-line-number="45"><span class="co">#&gt;  4 x.5         0.0894 </span></a>
<a class="sourceLine" id="cb7-46" data-line-number="46"><span class="co">#&gt;  5 x.3         0.0682 </span></a>
<a class="sourceLine" id="cb7-47" data-line-number="47"><span class="co">#&gt;  6 x.9         0.00802</span></a>
<a class="sourceLine" id="cb7-48" data-line-number="48"><span class="co">#&gt;  7 x.6         0.00746</span></a>
<a class="sourceLine" id="cb7-49" data-line-number="49"><span class="co">#&gt;  8 x.7         0.00400</span></a>
<a class="sourceLine" id="cb7-50" data-line-number="50"><span class="co">#&gt;  9 x.10        0.00377</span></a>
<a class="sourceLine" id="cb7-51" data-line-number="51"><span class="co">#&gt; 10 x.8         0.00262</span></a></code></pre></div>
<p>Notice how the <code><a href="../reference/vi.html">vi()</a></code> function always returns a tibble with two columns: <code>Variable</code> and <code>Importance</code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. Also, by default, <code><a href="../reference/vi.html">vi()</a></code> always orders the VI scores from highest to lowest; this, among other options, can be controlled by the user (see <code><a href="../reference/vi.html">?vip::vi</a></code> for details). Plotting VI scores with <code>vip</code> is just as straightforward.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Load required packages</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">library</span>(vip)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co"># Construct ggplot2-based VIPs</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">(p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/vip.html">vip</a></span>(tree))  <span class="co"># CART-like decision tree</span></a></code></pre></div>
<p><img src="vip_files/figure-html/trees-vi-vip-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">(p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/vip.html">vip</a></span>(rfo, <span class="dt">width =</span> <span class="fl">0.5</span>, <span class="dt">fill =</span> <span class="st">"green3"</span>))   <span class="co"># RF</span></a></code></pre></div>
<p><img src="vip_files/figure-html/trees-vi-vip-2.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">(p3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/vip.html">vip</a></span>(bst, <span class="dt">col =</span> <span class="st">"purple2"</span>))   <span class="co"># GBM</span></a></code></pre></div>
<p><img src="vip_files/figure-html/trees-vi-vip-3.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co"># Display all three plots side by side</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw"><a href="../reference/grid.arrange.html">grid.arrange</a></span>(p1, p2, p3, <span class="dt">ncol =</span> <span class="dv">3</span>)</a></code></pre></div>
<p><img src="vip_files/figure-html/trees-vi-vip-4.png" width="672" style="display: block; margin: auto;"></p>
<p>Notice how the <code><a href="../reference/vip.html">vip()</a></code> function always returns a <code>"ggplot"</code> object (by default, this will be a bar plot). For large models with many features, a dot plot is more effective (in fact, a number of useful plotting options can be fiddles with).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">library</span>(ggplot2)  <span class="co"># for theme_light() function</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="../reference/vip.html">vip</a></span>(bst, <span class="dt">num_features =</span> <span class="dv">5</span>, <span class="dt">bar =</span> <span class="ot">FALSE</span>, color, <span class="dt">horizontal =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb12-3" data-line-number="3">    <span class="dt">color =</span> <span class="st">"red"</span>, <span class="dt">shape =</span> <span class="dv">17</span>, <span class="dt">size =</span> <span class="dv">4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_light</a></span>()</a></code></pre></div>
<p><img src="vip_files/figure-html/trees-vi-vip-dot-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div id="linear-models" class="section level4">
<h4 class="hasAnchor">
<a href="#linear-models" class="anchor"></a>Linear models</h4>
<p>In multiple linear regression, or linear models (LMs), the absolute value of the <span class="math inline">\(t\)</span>-statistic is commonly used as a measure of VI. The same idea also extends to generalized linear models (GLMs). In the code chunk below, we fit an LM to the simulated <code>trn</code> data set allowing for all main and two-way interaction effects, then use the <code>step()</code> function to perform <a href="https://en.wikipedia.org/wiki/Stepwise_regression">backward elimination</a>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Fit a LM</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">linmod &lt;-<span class="st"> </span><span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>.<span class="op">^</span><span class="dv">2</span>, <span class="dt">data =</span> trn)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">backward &lt;-<span class="st"> </span><span class="kw">step</span>(linmod, <span class="dt">direction =</span> <span class="st">"backward"</span>, <span class="dt">trace =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co"># Extract VI scores</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="kw"><a href="../reference/vi.html">vi</a></span>(backward)</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; # A tibble: 21 x 3</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt;    Variable Importance Sign </span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;  1 x.4           14.2  POS  </span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt;  2 x.2            7.31 POS  </span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt;  3 x.1            5.63 POS  </span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;  4 x.5            5.21 POS  </span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt;  5 x.3:x.5        2.46 POS  </span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;  6 x.1:x.10       2.41 NEG  </span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt;  7 x.2:x.6        2.41 NEG  </span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt;  8 x.1:x.5        2.37 NEG  </span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt;  9 x.10           2.21 POS  </span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">#&gt; 10 x.3:x.4        2.01 NEG  </span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="co">#&gt; # ... with 11 more rows</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="co"># Plot VI scores</span></a>
<a class="sourceLine" id="cb13-23" data-line-number="23"><span class="kw"><a href="../reference/vip.html">vip</a></span>(backward, <span class="dt">num_features =</span> <span class="kw">length</span>(<span class="kw">coef</span>(backward)), </a>
<a class="sourceLine" id="cb13-24" data-line-number="24">    <span class="dt">bar =</span> <span class="ot">FALSE</span>, <span class="dt">horizontal =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="vip_files/figure-html/lms-1.png" width="672" style="display: block; margin: auto;"></p>
<p>One issue with computing VI scores for LMs using the <span class="math inline">\(t\)</span>-statistic approach is that a score is assigned to each term in the model, rather than to just each feature! We can solve this problem using one of the model-agnostic approaches discussed later.</p>
<p>Multivariate adaptive regression splines (MARS), which were introduced in <span class="citation">Friedman (1991)</span>, is an automatic regression technique which can be seen as a generalization of multiple linear regression and generalized linear models. In the MARS algorithm, the contribution (or VI score) for each predictor is determined using a generalized cross-validation (GCV) statistic. An example using the <code>earth</code> package is given below:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># Load required packages</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">library</span>(earth)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; Loading required package: plotmo</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; Loading required package: plotrix</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt; Loading required package: TeachingDemos</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co"># Fit a MARS model</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8">mars &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/earth/topics/earth">earth</a></span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> trn, <span class="dt">degree =</span> <span class="dv">2</span>, <span class="dt">pmethod =</span> <span class="st">"exhaustive"</span>)</a>
<a class="sourceLine" id="cb14-9" data-line-number="9"></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co"># Extract VI scores</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="kw"><a href="../reference/vi.html">vi</a></span>(mars)</a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt;    Variable Importance</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt;  1 x.4           100  </span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt;  2 x.1            83.2</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt;  3 x.2            83.2</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt;  4 x.5            59.3</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt;  5 x.3            43.5</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt;  6 x.6             0  </span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt;  7 x.7             0  </span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt;  8 x.8             0  </span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt;  9 x.9             0  </span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt; 10 x.10            0</span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co"># Plot VI scores</span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="kw"><a href="../reference/vip.html">vip</a></span>(mars)</a></code></pre></div>
<p><img src="vip_files/figure-html/earth-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="neural-networks" class="section level4">
<h4 class="hasAnchor">
<a href="#neural-networks" class="anchor"></a>Neural networks</h4>
<p>For NNs, two popular methods for constructing VI scores are the Garson algorithm <span class="citation">(Garson 1991)</span>, later modified by <span class="citation">Goh (1995)</span>, and the Olden algorithm <span class="citation">(Olden, Joy, and Death 2004)</span>. For both algorithms, the basis of these importance scores is the network‚Äôs connection weights. The Garson algorithm determines VI by identifying all weighted connections between the nodes of interest. Olden‚Äôs algorithm, on the other hand, uses the product of the raw connection weights between each input and output neuron and sums the product across all hidden neurons. This has been shown to outperform the Garson method in various simulations. For DNNs, a similar method due to <span class="citation">Gedeon (1997)</span> considers the weights connecting the input features to the first two hidden layers (for simplicity and speed); but this method can be slow for large networks.</p>
<p><strong>These methods will be implemented soon!</strong></p>
</div>
</div>
<div id="model-agnostic-vi-scores" class="section level3">
<h3 class="hasAnchor">
<a href="#model-agnostic-vi-scores" class="anchor"></a>Model-agnostic VI scores</h3>
<p>Coming soon.</p>
<div id="pdp-method" class="section level4">
<h4 class="hasAnchor">
<a href="#pdp-method" class="anchor"></a>PDP method</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Fit a PPR model (nterms was chosen using the caret package with 5 repeats of </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co"># 5-fold cross-validation)</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">pp &lt;-<span class="st"> </span><span class="kw">ppr</span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> trn, <span class="dt">nterms =</span> <span class="dv">11</span>)  </a>
<a class="sourceLine" id="cb15-4" data-line-number="4"></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co"># Plot VI scores</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="kw"><a href="../reference/vip.html">vip</a></span>(pp, <span class="dt">method =</span> <span class="st">"pdp"</span>)</a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; Warning: Setting `method = "pdp"` is experimental, use at your own risk!</span></a></code></pre></div>
<p><img src="vip_files/figure-html/ppr-pdp-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="ice-curve-method" class="section level4">
<h4 class="hasAnchor">
<a href="#ice-curve-method" class="anchor"></a>ICE curve method</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># Plot VI scores</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="../reference/vip.html">vip</a></span>(pp, <span class="dt">method =</span> <span class="st">"ice"</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; Warning: Setting `method = "ice"` is experimental, use at your own risk!</span></a></code></pre></div>
<p><img src="vip_files/figure-html/ppr-ice-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="permutation-method" class="section level4">
<h4 class="hasAnchor">
<a href="#permutation-method" class="anchor"></a>Permutation method</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># Plot VI scores</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">2021</span>)  <span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw"><a href="../reference/vip.html">vip</a></span>(pp, <span class="dt">method =</span> <span class="st">"permute"</span>, <span class="dt">obs =</span> trn<span class="op">$</span>y, <span class="dt">metric =</span> <span class="st">"rsquared"</span>,</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">    <span class="dt">pred_fun =</span> predict)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt; Warning: Setting `method = "permute"` is experimental, use at your own</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; risk!</span></a></code></pre></div>
<p><img src="vip_files/figure-html/ppr-permute-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-breiman-bagging-1996">
<p>Breiman, Leo. 1996. ‚ÄúBagging Predictors.‚Äù <em>Machine Learning</em> 24 (2): 123‚Äì40. <a href="https://doi.org/10.1023/A:1018054314350" class="uri">https://doi.org/10.1023/A:1018054314350</a>.</p>
</div>
<div id="ref-classification-breiman-1984">
<p>Breiman, Leo, Jerome Friedman, and Richard A. Olshen Charles J. Stone. 1984. <em>Classification and Regression Trees</em>. The Wadsworth and Brooks-Cole Statistics-Probability Series. Taylor &amp; Francis.</p>
</div>
<div id="ref-friedman-1991-mars">
<p>Friedman, Jerome H. 1991. ‚ÄúMultivariate Adaptive Regression Splines.‚Äù <em>The Annals of Statistics</em> 19 (1): 1‚Äì67. <a href="https://doi.org/10.1214/aos/1176347963" class="uri">https://doi.org/10.1214/aos/1176347963</a>.</p>
</div>
<div id="ref-interpreting-garson-1991">
<p>Garson, David G. 1991. ‚ÄúInterpreting Neural-Network Connection Weights.‚Äù <em>Artificial Intelligence Expert</em> 6 (4): 46‚Äì51.</p>
</div>
<div id="ref-data-gedeon-1997">
<p>Gedeon, T.D. 1997. ‚ÄúData Mining of Inputs: Analysing Magnitude and Functional Measures.‚Äù <em>International Journal of Neural Systems</em> 24 (2): 123‚Äì40. <a href="https://doi.org/10.1007/s10994-006-6226-1" class="uri">https://doi.org/10.1007/s10994-006-6226-1</a>.</p>
</div>
<div id="ref-back-goh-1995">
<p>Goh, A.T.C. 1995. ‚ÄúBack-Propagation Neural Networks for Modeling Complex Systems.‚Äù <em>Artificial Intelligence in Engineering</em> 9 (3): 143‚Äì51. <a href="https://doi.org/http://dx.doi.org/10.1016/0954-1810(94)00011-S" class="uri">https://doi.org/http://dx.doi.org/10.1016/0954-1810(94)00011-S</a>.</p>
</div>
<div id="ref-hastie-elements-2009">
<p>Hastie, Trevor, Robert. Tibshirani, and Jerome Friedman. 2009. <em>The Elements of Statistical Learning: Data Mining, Inference, and Prediction, Second Edition</em>. Springer Series in Statistics. Springer-Verlag.</p>
</div>
<div id="ref-accurate-olden-2004">
<p>Olden, Julian D, Michael K Joy, and Russell G Death. 2004. ‚ÄúAn Accurate Comparison of Methods for Quantifying Variable Importance in Artificial Neural Networks Using Simulated Data.‚Äù <em>Ecological Modelling</em> 178 (3): 389‚Äì97. <a href="https://doi.org/http://dx.doi.org/10.1016/j.ecolmodel.2004.03.013" class="uri">https://doi.org/http://dx.doi.org/10.1016/j.ecolmodel.2004.03.013</a>.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>The exception is GLM-like models (e.g., LMs and GLMs), described in the next section, which include an additional column called <code>Sign</code> containing the sign of the original coefficients.<a href="#fnref1" class="footnote-back">‚Ü©</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#warning-this-vignette-is-under-construction">‚ö†Ô∏è Warning: This vignette is under construction! üöß üöß üöß üöß</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#example-usage">Example usage</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Brandon Greenwell, Brad Boehmke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
